[{"content":"this post is a work in progress (~50% done) \u0026amp; may not be completely factual\nNotes on AVVideo Compression Recently I was tasked with fixing and adding new features to a video pipeline. Our app was supposed to record the user and save a compressed file to remote storage, however, our video files were getting corrupted. This post has some helpful information about Apple’s video encoding APIs. Not all information is 100% tested or factual - there is some speculation \u0026amp; I am not super knowledgable about this topic.\nCompression Considerations Modern compression algorithms take into account spacial (intra-) and temporal (inter-) compression. Spacial compression is similar to text compression, it tries to compress pixels within a frame into the smallest form factor. Temporal compression stores the difference between frames, which means areas of video that don’t change much get stored much more compactly.\nTwo of the most common codecs are H264 and H265 (HEVC). They can both technically encode lossless, but the majority of users, including me, choose lossy settings. HEVC can store the same quality video in about 50% of the space as H264, however there are compatibility issues in browsers, so you should evaluate who’s going to be watching your videos, and what capabilities exist. I chose to offer configurations for both codecs. Our videos are stored in mp4 containers with no audio.\nCompression terms Bit Rate Bit rate is the number of bits required to represent one second of video. In our case, one of our configurations was for HD (1080x720) @ 60fps, with a pixel format of 32_BGRA. This means, uncompressed, our video takes about 1080x720x32x60 = 1,492,992,000 (1492.992 mbit/s, ~1.5 Gbit/s). Since the average upload speed is currently ~23 Mbps (https://www.speedtest.net/global-index/united-states#fixed), it would take ~65sec to send 1 second of video \u0026amp; a single 26 second video would cost almost 5GB of storage.\nFor this reason, we select a bit rate far lower than what’s needed for uncompressed video.\nBit Rate = # of pixels * FPS * BPP\nBits per pixel (BPP) The number of bits to encode a pixel. 3 is considered “visually lossless”, which is a far cry from the 32 we were using in the above example. Selecting a number between 0.05 and 0.1 will have very noticeable differences. Numbers between 0.1 and 3 will usually have diminishing returns.\nMultiplying the bit rate by 0.131072 can give you a loose estimate for the MAX number of MB/s your video will consume.\nKeyframes (I-Frames) There are multiple types of frames in a video. Keyframes are just a picture. If you were to have all keyframes, the video would only use spacial compression.\nP-Frames and B-Frames These frames are what makes temporal compression work. They represent the differences between frames \u0026amp; are placed between two keyframes.\nGroup of Pictures (GOP) Distance between two keyframes. I-Frames sandwich a group of P-Frames and B-Frames.\nAVVideoCompressionPropertiesKey This section has descriptions of what the basic AVVideoCompressionPropertiesKey’s do, as well as some VideoToolbox keys.\nIn my understanding, these settings are often seen as a “suggestion” to the encoder \u0026amp; may not always be followed as expected.\nName Description Considerations Notes AVVideoAverageBitRateKey The average bit rate that the encoder will shoot for. If this value is set too low \u0026amp; the encoder has no other options to degrade video quality to fit the bitrate target, the encoder will fail and spit out a corrupt file. Give the encoder options, such as droppable frames, wider max GOP, wider QP (image quality) range. If the encoder is not struggling to fit into the bit rate, it will take up it’s space \u0026amp; return the highest quality video it can. Documentation falsely states that this property only applies to H264. AVVideoExpectedSourceFrameRateKey The frame rate of the input device connected to the AVCaptureSession. AVCaptureSession has basic presets available statically within code, however, there are additional device presets available during runtime (AVCaptureDevice.Format). AVVideoMaxKeyFrameIntervalKey Keyframe interval, aka GOP. 1 = 1th = every frame is a keyframe, 2 = 2nd = every other frame is a keyframe, 3 = 3rd = every third frame is a keyframe, etc… Having all keyframes restricts the encoder to spacial compression only. This is MAX key frame interval. If you have extra space in the bitrate, the encoder will pick a smaller GOP (if a large GOP is a limiting factor to your video quality.) Setting the GOP too small can lead to blurry video because if the encoder is in a crunch, it will degrade QP. Most encoders use a GOP length of 1-2 seconds, aka 30-60 frames @ 30fps, or 60-120 fps @60fps. Default settings may differ in H264 \u0026amp; HEVC. Documentation falsely states that this property only applies to H264. ","date":"2023-01-09T00:00:00Z","permalink":"https://nathanbarta.com/p/notes-avvideo-compression/","title":"Notes on AVVideo Compression"},{"content":"HACKNC2022 A few weeks ago I had the chance to participate in HackNC 2022. I chose the financial track.\nWhat I built Tempest is a manager for trading algorithms. Basically, it is an abstraction between the systems for placing orders on the exchange, and your trading algorithms. I made this because when I used to run trading bots, it was very annoying to manage them. With Tempest you can write trading algorithms in whatever language you want \u0026amp; not worry about how their signals get turned into trades. In the future it would be awesome for Tempest to also manage deployment.\nUnfortunately, I was not able to finish all that I wanted, but I learned a ton along the way, such as: gRPC, interprocess communication, protobuf.\nNarrowly avoided FTX going out of business and ruining the Exchange~Tempest part of my project.\n","date":"2022-11-21T00:00:00Z","permalink":"https://nathanbarta.com/p/hacknc2022/","title":"HackNC 2022"},{"content":"This document is from my work at ezpt.xyz, where I worked as an iOS developer on their physical therapy application. My hope is that this language becomes an industry standard, or at least a stepping-stone for the future of exercise notation.\nWhy are we creating EZEML? Workouts (aka Routines) on our app are constantly changing. Every time we modify what a workout looks like, we have to change our entire database schema. This is a difficult operation. With EZEML, our client-side app simply has to implement a version of EZEML that is high enough to run the current features. Existing workouts will not have to be migrated. The language will also be able to generate a human-readable description of the workout.\nWhat constructs does EZEML v1 implement? Sets \u0026amp; Reps Drop/Pyramid/Ladder sets Supersets/Circuits Asymmetric (Unilateral) exercises (Ex: single leg RDL) Weight, Time-based, RPE/ORM, Failure sets Syntax This section will introduce EZEML in increasing levels of complexity with examples before giving a technical definition.\nDescription EZEML 5 sets of 5 squats \u0026quot;squat\u0026quot;:5x5 3 sets of squats to failure \u0026quot;squat\u0026quot;:3xF 3 sets of squats with reps of 4, 6, and 8 \u0026quot;squat\u0026quot;:3x(4,6,8) 3 sets of 8 squats with the last set to failure \u0026quot;squat\u0026quot;:3x(8,8,F) 2 sets of 8 reps bench at 125lbs {\u0026quot;weight\u0026quot;:lbs}\u0026quot;bench\u0026quot;:2x8@125 3 sets of 8 reps decreasing by 3 bench at 125lbs {\u0026quot;weight\u0026quot;:lbs}\u0026quot;bench\u0026quot;:3x(8,5,2)@125 Dropset of 4 sets, 4 reps, starting at 225lbs, drop by 15lbs deadlift {\u0026quot;weight\u0026quot;:lbs}\u0026quot;deadlift\u0026quot;:4x(4@225,4@210,4@195,4@180 Dropset of 4 sets, 4 reps increasing by 3, starting at 90lbs, drop by 15lbs overhead press {\u0026quot;weight\u0026quot;:lbs}\u0026quot;overhead-press\u0026quot;:4x(4@90,7@75,10@60,13@45) 3 sets of 4 reps single leg RDL’s \u0026quot;single-leg-rdl\u0026quot;:3x4:3x4 3 sets of 4 reps on left leg, 3 sets of 5 reps on right leg, single leg RDL’s \u0026quot;single-leg-rdl\u0026quot;:3x4:3x5 3 sets of 5 squats, 3 sets of 5 deadlift \u0026quot;squat\u0026quot;:3x5;\u0026quot;deadlift\u0026quot;:3x5 4 sets of 10 overhead press, and superset of 3 sets of 5 squats, 3 sets of 5 deadlift. \u0026quot;overhead-press\u0026quot;:4x10;super(\u0026quot;squat\u0026quot;:3x5;\u0026quot;deadlift\u0026quot;:3x5) 4 sets of 60sec achilles iso hold \u0026quot;achilles-iso\u0026quot;:4x60T 4 sets of 60, 80, 100, 120 sec, achilles iso hold \u0026quot;achilles-iso\u0026quot;:4x(60T,80T,100T,120T) 4 sets of 60 sec achilles iso hold with 40lbs {\u0026quot;weight\u0026quot;:lbs}\u0026quot;achilles-iso\u0026quot;:4x(60T)@40 4 sets of 60 sec decreasing by 10sec achilles iso hold with 40lbs increasing by 10lbs {\u0026quot;weight\u0026quot;:lbs}\u0026quot;achilles-iso\u0026quot;:4x(60T@40,50T@50,40T@60,30T@70) 4 sets of 60sec single leg achilles iso hold \u0026quot;single-leg-achilles-iso\u0026quot;:4x60T:4x60T 4 sets of 5 squats at 6 RPE \u0026quot;squat\u0026quot;:4x5%6 EZEML v1.0 is made up of two sections, the header and the tokens (body.)\nSyntax: The Header The header is used for creating context for the computer. It can be omitted if you are using this notation by hand. Parameters are delimited by commas. You may also pass in key-value pairs not enumerated by this specification to be used in your implementation.\nParameters:\nrequired version: The version of EZEML it was written in. required weight: The unit of weight for all the exercises. Supported weights: lbs (Pounds), kg (kilograms), st (stone). rest-set: The amount of rest between sets (seconds) rest-exercise: The amount of rest between exercises (seconds). Behavior of this parameter when it comes to supersets is left to the implementation. name: The name for the workout. Workouts do not have to be named. Example: {\u0026quot;version\u0026quot;:\u0026quot;1.0\u0026quot;,\u0026quot;weight\u0026quot;:\u0026quot;lbs\u0026quot;,\u0026quot;rest-set\u0026quot;:30,\u0026quot;rest-exercise\u0026quot;:60,\u0026quot;name\u0026quot;:\u0026quot;Strength program 2\u0026quot;}\nSyntax: The Body A token is an exercise within a workout. They are separated by “;”. There are two types of tokens: Single, and Super. There is also a Circuit token, which is an alias of Super. Single is a single exercise. Super is a collection (superset) of tokens (other exercises) - however these tokens have the restriction of no supersets, since EZEML v1.0 prohibits nested supersets. A Single token has two parts, name and work - separated by “:”. The name is the name of an exercise. The work is what you’ll be doing for that exercise. Names follow naming conventions in Rules (next section.) Work can further be separated by another “:” in certain cases (asymmetric exercises). A Super token surrounds a collection of Single tokens with function-like syntax super(...). A Circuit is the same as a Super, it is a generalized grouping of exercises, while a superset is usually designed with a “push pull” aspect.\nType Description Syntax Single A single exercise with a name and work. \u0026quot;NAME\u0026quot;:WORK Super A collection of other tokens super(SINGLE;...) Circuit A collection of other tokens circuit(SINGLE;...) There are 4 kinds of work: None, Standard, Standard Varied, Asymmetric.\nKind Description Syntax None No Work. Standard SETS and REPS delimited by “x”. SETSxREPS Standard Varied SETS and (variable) REPS delimited by “x”. SETSx(REPS,...) Asymmetric A standard or standard varied or none kind on each side of “:” delimiter. STANDARD:STANDARD or STANDARD:STANDARD_VARIED or STANDARD:NONE or STANDARD_VARIED:STANDARD or STANDARD_VARIED:STANDARD_VARIED or STANDARD_VARIED:NONE or NONE:STANDARD or NONE:STANDARD_VARIED or NONE:NONE Reps can have modifiers attached to them. Modifiers follow a precedence, and should be applied top to bottom in the following chart. RPE cannot be combined with weight, but it can be combined with time.\nModifier Description Syntax Time Makes reps be time-based instead of repetition based. REPST Weight Designates how much weight you should be lifting for a given rep. STANDARD@WEIGHT or STANDARD_VARIED@WEIGHT or inside STANDARD_VARIED like SETSx(REPS@WEIGHT,...) aka REPS@WEIGHT RPE Designates the intensity of the rep. STANDARD@RPE or STANDARD_VARIED@RPE or inside STANDARD_VARIED like SETSx(REPS@RPE,...) aka REPS@RPE Rules (Not exhaustive) Acceptable characters for naming (workouts and exercises): a-z, A-Z, \u0026quot; “, “-”, 0-9, “’”, “,”, “:”, “%”, “°”, “+”, “/”, “\u0026amp;”, “@”, “\u0026lt;”, “\u0026gt;”, “#”, “(”, “)”. You cannot currently put a superset inside of a superset If you modify weight for one set, you must explicitly set it for the other sets too If a symetrical exercise has an asymetrical/unilateral variation (RDL’s, single leg RDL’s), you should not use asymetrical notation on the symetric version. All named exercises have a concrete description. While a single arm bench might exist, you should name it “single-arm-bench” (or something else) instead of “bench”. Time must be notated in seconds. (Ex: 1 minute and 20 seconds -\u0026gt; 80sec) Time sets may not be combined with rep sets. This goes back to “all named exercises have a concrete description” point. You may however superset a rep set and a time set for a similar effect. The max number for reps, sets, weight, and time, is currently 65535. Fractional weight is accepted up to 2 decimal places. Exercise names have a minimum length of 1 and max of 128 characters (Ex: nathans-super-epic-amazing-special-exercise-with-some-awesomely-cool-modifications-and-a-super-long-name-that-has-128-characters.) Supersets must have 2 or more exercises STANDARD_VARIED SETS and number of REPS terms must match (Ex: 3x(4,4,4) right, 3x(4,4) wrong.) Parsing EZEML is simple enough that you don’t need node trees or other data structures. However, the implementation is your choice. You can parse all tokens at once, or parse “by the wire,” one token at a time (iterating over the lexemes) - however depending on the source of your EZEML files you may need to call a validation function to ensure the syntax is correct.\nFiles \u0026amp; Compression A file should contain a single workout. The file extension is .ezml. EZEML is meant to be human readable, however you are free to add a layer of abstraction and add lossless compression if you wish. We suggest you use the file extension .ezmlc for compressed EZEML.\nFAQ How do I notate ROM? EZEML does not currently support ROM. Create separate exercises for different ROM. (Ex: “squat-parallel”, “squat-atg”) How do I notate tempo? EZEML does not currently support tempo. Create separate exercises for different tempo. (Ex: “bench-4-2-1”). You could also make a timeset with weight - which works well for eccentric exercises. How do I notate negatives? Negatives are considered separate exercises than their “positives” counterparts, so just name them differently (Ex: “neg-bench”) ","date":"2022-09-22T00:00:00Z","permalink":"https://nathanbarta.com/p/ezeml/","title":"EZPT Exercise Markup Language (EZEML)"},{"content":"All changes require minimal code changes and boost performance substantially. This is not a tutorial on how to use a map view.\nDequeue If you are looking at this blog, there is a high chance you already know the following optimization.\nMap Views are set up very similarly to Table Views from an interface perspective. Developers should make sure they dequeue MKMapAnnotations.\n1 2 3 4 5 6 7 8 func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -\u0026gt; MKAnnotationView? { let annotationView = mapView.dequeueReusableAnnotationView(withIdentifier: nil, for: annotation) // \u0026lt;- important annotationView.canShowCallout = true annotationView.annotation = annotation return annotationView } This simple change lets the map view reuse annotation views when they move offscreen. The performance gained from this system is crucial for keeping the map scrolling smoothly when there are large quantities of annotations. As a tradeoff, this optimization will increase the memory used, but it is generally considered best practice.\nAnnotation Callouts Typically, developers choose to add callout accessory views inside mapView(viewFor:), however this is actually a critical memory mistake since accessory view creation is not lazy. Unless there is some special reason you need to create your accessory view inside mapView(viewFor:), you should instead create it in mapView(didSelect:).\n1 2 3 4 5 6 // Performance testing results (Physical iPad pro 11inch iOS 14.6, restarted after each run): // 10k trials: 29mb in savings // 100k trials: 92.8mb in savings + considerably shorter launch time func mapView(_ mapView: MKMapView, didSelect view: MKAnnotationView) { view.rightCalloutAccessoryView = UIButton() } Clustering Annotation Views Clustering annotation views is a great way of reducing the number of annotations being rendered on screen - it should be used in almost all scenarios. Benefits from this optimization greatly outweigh the previous two optimizations in most scenarios. There are many great tutorials on clustering, so I won’t dive into it in this post.\nCaching User Location Unless you need real time updating information, you should not be using mapView.showsUserLocation = true, because it consumes a lot of energy (in my tests it was consuming ~10% of CPU.)\nInstead, cache a pin and update it’s location manually.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 private let locationManager = CLLocationManager() private var userPin: MKPointAnnotation? func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) { //... if userPin != nil { mapView.removeAnnotation(userPin!) } let newUserPin = MKPointAnnotation() newUserPin.coordinate = center userPin = newUserPin self.mapView.addAnnotation(self.userPin!) } Devices iOS 14+ are compatible with a manually placed “default” user location pin - devices bellow iOS 14 are stuck with whatever you come up with.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -\u0026gt; MKAnnotationView? { if annotation === userPin { // note the operator here if #available(iOS 14.0, *) { // most devices get this nice pin let v = MKUserLocationView(annotation: annotation, reuseIdentifier: \u0026#34;upin\u0026#34;) v.zPriority = .max v.isEnabled = false v.isOpaque = true return v } else { let v = MKMarkerAnnotationView(annotation: annotation, reuseIdentifier: \u0026#34;upin\u0026#34;) v.glyphImage = UIImage(systemName: \u0026#34;person.circle.fill\u0026#34;) v.isEnabled = false v.isOpaque = true return v } } } Getting Memory to Release The biggest problem with map views is that they never release their memory. Apps using map views will often balloon to hundreds of mb of memory within a few scrolls. This memory will then refuse to be released, damaging the performance of the rest of the app/device. Unfortunately there is no mapView.clearCache() function, so we will have to do it ourselves.\nThe solution is to create the map view programmatically, and delete/recreate when necessary. This optimization is highly application specific, so I leave it to the reader.\n","date":"2022-09-20T00:00:00Z","permalink":"https://nathanbarta.com/p/maxing-out-mapkit/","title":"Maxing out MapKit: Optimizing map views for high performance"},{"content":"this page got corrupted\u0026hellip; I\u0026rsquo;ll fix it eventually\nResources Originally written for the #swift-dev branch of PittCSC\niOS/MacOS Application Development \u0026amp; Swift Name Topics Post Frequency Reading-level Swift by Sundell Articles, Tutorials, Swift Frequent Beginner-Advanced UseYourLoaf Debugging, testing, assorted Weekly Intermediate-Advanced HackingWithSwift Tutorials, career Occasional Beginner TheSwiftDev Tutorials, Vapor, SPM, design patterns, assorted Every other week Intermediate - Advanced SwiftRocks Deployment, security, internals Monthly… sometimes Advanced RDerik Security, environment Monthly… sometimes Advanced Donny Wals Data, JSON, Combine Every other week Intermediate - Advanced Dave DeLong HTTP with Swift, compiler Monthly… sometimes Beginner - Advanced TheAtomicBirdhouse Assorted, CloudKit Monthly… sometimes Intermediate - Advanced iOSGoodies Newsletter, shoutouts Weekly Beginner - Advanced AndyIbanez Assorted Weekly Beginner - Advanced DanielSaidi SPM Monthly… sometimes Beginner - Advanced RayWenderlich Tutorials Weekly Beginner - Advanced Swiftjectivec Tutorials Frequent Beginner-Advanced Erica Sadun Assorted Occasional Intermediate-Advanced Igor Kulman Tutorials Monthly Intermediate-Advanced SarunW Tutorials Almost daily Beginner-Advanced Belkadan Software Articles, Low-Level, Swift Monthly Beginner-Advanced ","date":"2022-09-20T00:00:00Z","permalink":"https://nathanbarta.com/p/my-favorites/","title":"My Favorite Swift/iOS/MacOS Resources"},{"content":"A metatype is a type of a type. OK post done…..jk\nMetatypes are used to access properties and methods (including initializers) belonging to a type - in contrast to an instance. Every time you use a static property or function, you are using a Metatype.\n1 2 let whatsGoingOnHere: Int.Type = Int.self // Int.Type is a type, and Int.self is an instance let a = SomeClass() // what’s actually happening is SomeClass.self.init() They are helpful for generic code. In fact, Codable \u0026amp; UITableView have methods using parameters of X.Type.\nTo be continued…\nOriginally published 09/15/2022 https://pittcsc.org/, republished 09/20/2022.\n","date":"2022-09-15T00:00:01Z","permalink":"https://nathanbarta.com/p/swift-daily-73/","title":"Day #73"},{"content":"Xcode 12 introduced svg support - meaning you can put svg assets in the /assets folder.\nOriginally published 09/15/2022 https://pittcsc.org/, republished 09/20/2022.\n","date":"2022-09-15T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-72/","title":"Day #72"},{"content":"Starting with iOS 11, and the iPhone 5s (2013), iOS devices have been 64bit instead of 32bit. Apple watches were updated to 64bit in 2016, model: s2. You can still build to 32bit architecture - however it’s basically useless since almost no devices at this point run on it.\nOriginally published 09/13/2022 https://pittcsc.org/, republished 09/20/2022.\n","date":"2022-09-13T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-71/","title":"Day #71"},{"content":"The maximum size of an app is 4gb - uncompressed. For iOS 9+ the max executable size is 500mb, which is 8.33x larger than what was allowed for iOS 7-8. Apple Watch has a restriction of 75mb.\nOriginally published 09/12/2022 https://pittcsc.org/, republished 09/20/2022.\n","date":"2022-09-12T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-70/","title":"Day #70"},{"content":"Swift used to have prefix and postfix inc/dec operators, but they were removed in Swift v3.\nOriginally published 09/08/2022 https://pittcsc.org/, republished 09/20/2022.\n","date":"2022-09-08T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-68/","title":"Day #68"},{"content":"You do not need to include the “return” keyword inside a function with one expression.\n1 2 3 func myFunction() -\u0026gt; String { \u0026#34;Boo\u0026#34; } Originally published 10/22/2021 https://pittcsc.org/, republished 09/20/2022.\n","date":"2021-10-22T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-67/","title":"Day #67"},{"content":"This is the implementation behind optionals in swift:\n1 2 3 4 enum Optional\u0026lt;T\u0026gt; { case some(T) case none } It is an algebraic data type. Swift has syntax to help make optionals more usable (if let, guard let, etc.)\nOriginally published 10/15/2021 https://pittcsc.org/, republished 09/20/2022.\n","date":"2021-10-15T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-60/","title":"Day #60"},{"content":"Xcode 6.0 was the first version to allow Swift integration into the SDK. It was 2014 at the time and iPhones were running iOS 8.0.\nOriginally published 10/13/2021 https://pittcsc.org/, republished 09/20/2022.\n","date":"2021-10-13T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-58/","title":"Day #58"},{"content":"iCloud had a predecessor called MobileMe, which was a collection of software and tools packaged in a $100/y subscription sold by Apple.\nOriginally published 10/12/2021 https://pittcsc.org/, republished 09/20/2022.\n","date":"2021-10-12T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-57/","title":"Day #57"},{"content":"iPhones were not originally intended to run 3rd party native apps. Steve Jobs envisioned developers using the on-device safari app as an engine for web apps. iOS 2.0 (called iPhone OS back then) brought the app store which allowed native running applications. Now iOS 11.3+ supports progressive web apps, which is basically a hybrid between a native app and a web app (very containerized).\nOriginally published 10/09/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-10-09T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-54/","title":"Day #54"},{"content":"Kotlin has interop with objc (and therefore some interop with Swift too.) It might be possible to recycle code between an android and iOS application. Although, you should remember that objc code is generally slower than Swift. So maybe recycle authentication code, but not some API client that gets used often.\nOriginally published 10/07/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-10-07T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-52/","title":"Day #52"},{"content":"Bridging between data structures (set, array, dict) in swift and objc is usually O(1) time space complexity. If elements in these data structures are not classes or objc protocols or bridgeable to a foundation type they will be lazily converted on call, which is O(n). So…. do your research - some stuff is toll free, but some stuff is not.\nOriginally published 10/06/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-10-06T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-51/","title":"Day #51"},{"content":"Chris Lattner, the creator of Swift, is also responsible for LLVM and the Clang project.\nOriginally published 10/04/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-10-04T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-49/","title":"Day #49"},{"content":"Swift is old enough to have influenced other languages. Rust’s optional bindings (the “if let” pattern in Swift) are credited to Swift.\nhttps://doc.rust-lang.org/reference/influences.html\nOriginally published 10/03/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-10-03T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-48/","title":"Day #48"},{"content":"You can code apps without Xcode. Everyone knows Xcode can be a hastle some times, but it really is the best way to program iOS/macOS applications. You can build iOS apps just how you’d build other software, but it gets annoying pretty fast. At some point, you will rely on the Xcode SDK/toolchain to sign your application for distribution.\nhttps://betterprogramming.pub/writing-ios-apps-without-xcode-89450d0de21a https://stackoverflow.com/questions/61464644/i-have-xcode-command-line-tools-do-i-really-need-the-xcode-gui-to-develop-ios-a Originally published 10/02/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-10-02T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-47/","title":"Day #47"},{"content":"Little bit of a history lesson. As you probably know, Swift was made by Apple. However, it is now open source. It was made open source in December 3 2015, only a year after launch. People tend to criticize Swift for being an “Apple Language” yet it has been independent for years.\nYou can track the progress of the language on https://swift.org/ and https://github.com/apple/swift\nOriginally published 10/01/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-10-01T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-46/","title":"Day #46"},{"content":"Apple released a new API with iOS 15 called SharePlay. It’s basically a tool to sync media between people on a FaceTime call. For instance, you can watch a movie as a group - all while being physically distant. You may have heard that android users can now FaceTime too (with Facetime links), it’s all part of a FaceTime revamp.\nOriginally published 09/29/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-09-29T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-44/","title":"Day #44"},{"content":"Rethows is a keyword to indicate that a function is wrapping around a throwing function.\n1 2 3 4 func iThrow() throws -\u0026gt; Bool {} func iDontThrow() -\u0026gt; Bool {} func iWrap(t: (Void) -\u0026gt; throws Bool) rethrows {} iWrap can wrap either of the functions. During compilation, Swift can tell if the wrapped function throws or not - which means it will not ask you to implement try/catch for a iDontThrow() parameter.\nOriginally published 09/28/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-09-28T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-43/","title":"Day #43"},{"content":"In celebration of the creation of rust-dev branch, we’ll be having a themed post today.\nVarious people have worked on creating objc/swift bindings to rust. Is this knowledge really useful? Probably not. Have fun.\nhttps://belkadan.com/blog/2020/08/Objective-Rust/ https://crates.io/crates/objc https://sasheldon.com/blog/2014/11/28/interoperating-between-objective-c-and-rust/ https://github.com/nvzqz/swift-bindgen Originally published 09/27/2021 https://pittcsc.org/, republished 09/16/2022.\n","date":"2021-09-27T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-42/","title":"Day #42"},{"content":"Enum logic: You can clean up a lot of code by hiding logic in an enum.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 enum Genre { case fiction case scifi case nonFiction case history case science case medical case other(name: String) //Associated value var isSciencey: Bool { switch self { case .scifi, .science, .medical: return true default: return false } } } //The code above lets us do this: let isSciencey = someGenre.isSciencey //Instead of this: let isSciencey = someGenre == .scifi || someGenre == .science || someGenre == .medical Originally published 09/26/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-26T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-41/","title":"Day #41"},{"content":"Yesterday’s feature gets a little bit more advanced.\nYou can actually do matching with it!\n1 2 3 4 5 6 7 8 enum MyEnum { case multiple(_ firstValue: String, _ secondValue: Int) } if case let MyEnum.multiple(_, theSecondValue) = .multiple(\u0026#34;anything\u0026#34;, 10) { // True no matter what `firstValue` is print(theSecondValue) } Code credit: Dustin @ Strega’s Gate\nOriginally published 09/25/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-25T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-40/","title":"Day #40"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 // Lets take an old example enum Genre { case fiction case scifi case nonFiction case history case science case medical case other(name: String) //Associated value } // The defacto method for pulling out associated values invloves a switch statement switch genre { case .fiction: //... case .other(let name): print(name) } // However there is actually another method to pull out just the associated value if case let .other(name) == \u0026#34;poetry\u0026#34; { print(name) } //or if case .other(let name) == \u0026#34;poetry\u0026#34; { print(name } Originally published 09/24/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-24T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-39/","title":"Day #39"},{"content":" 1 2 3 4 5 //Marking vars with the \u0026#34;lazy\u0026#34; keyword will make it so they are only initialized if called, and only initialized once. lazy var dateFormatter = DateFormatter() //One cool feature of Swift a lot of people don\u0026#39;t realize is that constants work the same way!! The following object will only be initialized if/when it gets called. It\u0026#39;s even thread-safe. Warning: it will stay in memory unless you manually manage it or it gets dereferenced. Be extra cautious if it is global. static let someBigAsset = MegaClass() Other tips To add onto this, you can use the @autoclosure closure keyword instead of @escaping to give lazy-like tendencies to your closures. Auto closure means the closure won’t initialize or execute until it’s called, so it saves execution time. — Josh Jaslow\nOriginally published 09/23/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-23T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-38/","title":"Day #38"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 // Old Swift loop for var i = 0; i \u0026lt; 100; i++ {} // Swift 3?+ loop for i in 0..\u0026lt;100 {} // Old range operator (this was from the beta of swift) let someRange = 1..10 // New range operator let someRange = 1..\u0026lt;10 Originally published 09/22/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-22T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-37/","title":"Day #37"},{"content":"Bitwise operators in Swift exist, and are just like bitwise operators in C, except that they will error on overflow. However, you can disable overflow errors with these special operators:\nOverflow addition (\u0026amp;+) Overflow subtraction (\u0026amp;-) Overflow multiplication (\u0026amp;*)\nYou can also define your own operators such as a logical shift “\u0026gt;\u0026gt;\u0026gt;”.\nOriginally published 09/20/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-20T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-35/","title":"Day #35"},{"content":"Working with codable dates There are many ways to represent a date in CS. With codable, you can code and convert date representations to match the Date() type in swift.\n1 2 3 4 5 6 7 8 9 10 11 12 //Decoding example. Convert an ISO8601 to Date() let decoder = JSONDecoder() decoder.dateDecodingStrategy = .iso8601 //Custom: You can also decode from a custom date format using DateFormatter(). decoder.dateDecodingStrategy = .formatted(someCustomDateFormatter) //You can also decode with a closure decoder.dateDecodingStrategy = .custom { decoder in //... return ... } Originally published 09/19/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-19T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-34/","title":"Day #34"},{"content":"It is possible to make a custom keyDecodingStrategy. However, I think it is not worth the effort since working with strings in Swift is the most annoying thing ever. You might as well hardcode everything like in day #31 at that point - it’ll make your app faster.\nSee here for example implementation: https://martiancraft.com/blog/2018/08/Implementing-custom-key-strategy-for-coding-types/\nOriginally published 09/18/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-18T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-33/","title":"Day #33"},{"content":"If you just have a 1:1 conversion like snake_case-\u0026gt;camelCase, you do not need to do what was described in day #31, instead you can use built in decoding strategies.\n1 2 let decoder = JSONDecoder() decoder.keyDecodingStrategy = .convertFromSnakeCase There are options for DefaultKeys, SnakeCase, and Custom. This technique comes with a performance cost, but is great for prototyping.\nOriginally published 09/17/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-17T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-32/","title":"Day #32"},{"content":"Data coming from (or going to) an API is not always organized/standardized. For instance, the json keys could have different naming schemes. Consider the case below:\n1 2 3 4 5 { first_name: \u0026#34;\u0026#34; MiddleName: \u0026#34;\u0026#34;, lastName: \u0026#34;\u0026#34;, } So how does this get coded? By using a feature called codingkeys. Simply create an enum inside the object you are decoding to as following:\n1 2 3 4 5 6 7 8 9 10 struct Name: Codable { let firstName: String let middleName: String let lastName: String enum CodingKeys: String, CodingKey { case firstName = \u0026#34;first_name\u0026#34; case middleName = \u0026#34;MiddleName\u0026#34; case lastName = \u0026#34;lastName\u0026#34; } } This codingkeys enum will allow the codable object to map to the json keys.\nOriginally published 09/16/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-16T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-31/","title":"Day #31"},{"content":"Well, first things first, compile it. Putting your code in a playground/REPL is not going to give you accurate results. The best way to test your code is with testing frameworks. You can test sections of pure swift easily with attabench https://swiftrocks.com/benchmarking-swift-code-properly-with-attabench. Xcode of course comes with it’s own profiling tools (called instruments) for testing things such as launchtime, time, leaks, memory usage, battery usage, network/file usage, and much more - which is applicable to full scale application testing.\nOriginally published 09/15/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-15T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-30/","title":"Day #30"},{"content":"Swift consumes 2.79x energy than C Swift takes 4.2x longer than C Swift uses 2.71x more memory than C\nOverall, these are some great numbers for a language with so many features.\nOriginally published 09/14/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-14T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-29/","title":"Day #29"},{"content":"If your API is HTTP only, there is nothing you have to do. However, if you are using a self-signed certificate for HTTPS (testing purposes of course), there are extra things to do. iOS apps will not trust self-signed certs.\nMethod 1: Force Trust (not recommended) Add key “Allow Arbitrary Loads : YES” to “App Transport Security Settings” in info.plist Wherever you are making the https calls, conform the class to URLSessionDelegate and add Method 2: Install the cert to the device (recommended) You can simply transfer the cert file to the device, and then configure it in settings. https://medium.com/collaborne-engineering/self-signed-certificates-in-ios-apps-ff489bf8b96e https://developer.apple.com/library/archive/qa/qa1948/_index.html\nNotes If you leave test code from Method 1 in your app, it is likely that your app will not be accepted bc it’s a security flaw. Using compiler directives to distinguish between test and build versions could be useful, but you still might get rejected. There are more complicated setups out there, but you won’t probably use them unless you work at a big company.\nOriginally published 09/13/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-13T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-28/","title":"Day #28"},{"content":"Xcode documentation is really fun! You can tag functions with comments, which are then presented nicely when you OPT+Click the function in context. Here is an example on a data structure. There are tons of tags you can use, see more at https://nshipster.com/swift-documentation/\nOther tips Pressing CMD+OPT+\u0026quot;/\u0026quot; will auto generate a skeleton. — Josh Jaslow\nOriginally published 09/12/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-12T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-27/","title":"Day #27"},{"content":"Swift has “where” clauses that allow you to put logic in loop statements and extensions\n1 2 3 4 5 6 7 let list = Array(0...100) for x in list where x \u0026lt; 50 { print(x) } // For an example with extensions, see day #10! Originally published 09/11/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-11T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-26/","title":"Day #26"},{"content":"It is possible to make a linked list in 4 lines of code in Swift (but just because you can do something doesn’t mean you should)\n1 2 3 4 5 6 7 8 9 indirect enum LinkedListNode\u0026lt;T\u0026gt; { case value(value: T) case next(value: T, next: LinkedListNode) } switch currentNode { case .value(let value): print(value) case .next(let value, let next): print(value); currentNode = next } Originally published 09/10/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-10T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-25/","title":"Day #25"},{"content":"Derived data is stored at /Users/YourNameHere/Library/Developer/Xcode/DerivedData\nAt a basic level, it will cache build information for your projects, but let’s see what it actually stores.\nPrecompiled module files. These files are an abstraction to reading in headers every time you import something in code. These files will be under a folder with a hash as a name. The hash takes in clang arguments as input. Index folder: You may have seen an indicator saying Indexing in progress\u0026hellip; in Xcode. Basically, indexing is creating a quick way to search though your project. Xcode manages searching and find/replace stuff very nicely. Logs: Just a history of builds/testbuilds etc… Builds: The actual builds are saved. If you don’t change your code between runs, Xcode will just use the last stored build. Intermediates: Other files that need to be build for the project. These normally include libraries and frameworks. The great part about this section is that many of the files here don’t get modified too much, so the cache is very pure (is that a legit term to describe caches? Idk). If you’ve ever had weird problems with xcode, you’re probably familiar with the delete derived data trick. I don’t know why problems arise here, or why deleting derived data works, but I hypothesize that it has something to do with cache invalidation bc that kind of stuff gets extremely hard at the low level.\nHere’s a quick tip for all the avid Xcode users out there: Navigate to DerivedData and create an alias. Put that alias in your desktop folder. Tada! You now have a less annoying way of accessing DerivedData when you need to.\nInformation for this post was sourced from the article linked below\nOriginally published 09/09/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-09-09T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-24/","title":"Day #24"},{"content":"I am not a lawyer and this is not legal advice\nIntroduction An LLC is a legal entity formed to protect business partners from liability arising from the business. It is essential to get an LLC if you want to protect and isolate yourself from lawsuits (sometimes predatory) involving your business - so you cannot be held personally liable for damages.\nThe purpose of this guide is to inform you in LLC creation so scummy registered agent services do not scam you into overpriced services.\nStep 1: Research Business Needs If you have a business with a physical presence in a certain state (ex: dog walking, warehouse/distributer, restaurant), you will likely need to incorporate in that state. However, if your business is completely online/digital with no “nexus” (see “nexus” laws), you may be able to incorporate in any state.\nStep 2: Pick a State Skip if your business has a physical presence as described in step 1\nNot all states are created equal. Each state has different rules, policies, and precedent for LLC’s. Rules and policies can be found by searching “State Name + LLC act”.\nThere are a few states that stand out from the rest:\nWyoming: Has strong legal protections for sole proprietors Anonymous incorporation (keeps your personal details hidden from filings) Competitive fees and low taxes Ability to manage online (without ever stepping in the state - or even country) Delaware: Anonymous incorporation Very strong laws for handling disputes Ability to set up unique tax structures There are also a few states that are notably bad for LLC’s:\nNorth Carolina Minnesota Step 3: Get a Registered Agent Most states require that your LLC has a registered agent. A registered agent is basically someone who accepts legal documents for you.\nRegistered agents usually cost $50/y and can be found online. Depending on the state, you may be able to be your own registered agent.\nStep 4: File Articles of Organization This is the part where your LLC gets created. Find your state’s filing process (usually on the Secretary of States’ website). There will be a filing fee, and you will need to provide various information, including the name of your registered agent. Alternatively, you can use a service to complete this step, which may add anonymity - at a cost.\nWarning: This is the step where you name the LLC. Make sure to not pick anything trademarked or offensive. Names can be changed later - for a fee.\nStep 5: Write your Operating Agreement Your operating agreement is basically the rules to your organization.\nHow many shares do you need to vote? What are the titles of the leaders in your organization? Who has power to sign agreement? Questions like these should be answered in this document. There are templates online, and if you used a service for the previous step, they might have drafted one for you.\nStep 6: Get an EIN An EIN is basically a SSN for your company. It is used for tax purposes and can be obtained by applying for free on the IRS website.\nStep 7: Get a Business Bank Account You must separate your personal assets and business assets if you want your LLC to work. Otherwise, you will be “piercing the corporate veil”, and will loose legal protections.\nTo get a business bank account you should select a bank that meets your needs, and follow their application process. You will need your articles of organization, operating agreement, an EIN, and someone authorized to sign for the business.\nWarning: Before entering an agreement read all terms. Also, see signing instructions in step 8.\nStep 8: Maintain There are various steps to maintain an LLC.\nYou must pay LLC fees to the state You must pay taxes You should have annual meetings on record (even if this means talking to yourself) You must comply with rules and regulations Sign LLC documents correctly. Ex: “Nathan Barta, managing member of X LLC” not “Nathan Barta”, which could expose you to liability. Step 9: Expand (optional) If you want to expand your LLC to another state, you will have to get a registered agent in the state you wish to expand to. You will then have to register as a foreign entity.\nWarning: Foreign entity fees can get expensive. Check the state’s LLC act to determine if you really need to register. Definitions of “conducting business” differ by state - so you may be able to do certain things without a license.\n","date":"2021-09-08T00:00:00Z","permalink":"https://nathanbarta.com/p/llc-guide/","title":"Creating and Maintaining and LLC for your business venture"},{"content":"SPM problems.\nErrors are very hard to decode: You do not get a lot of info from the error logs. Hard to get complete information: There are no good all encompassing guides. Stuff gets outdated very frequently: You will sometimes have to download someone else’s code manually just to change the shebang at the top of their package file “// swift-tools-version:5.3” Super complicated File structure not always obvious It becomes really hard to do more advanced things like link libraries There are a whole lot of linking technicalities that SPM obscures, static vs dynamic, XCworkspace vs xcodeproj, ect… Originally published 04/24/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-04-24T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-22/","title":"Day #22"},{"content":"Here is what a package file looks like. You may note that it looks similar to JSON.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // swift-tools-version:5.3 //\u0026lt;- This comment is necessary, it specifies tool version import PackageDescription let package = Package( name: \u0026#34;MyLibrary\u0026#34;, platforms: [ .macOS(.v10_15), ], products: [ .library(name: \u0026#34;MyLibrary\u0026#34;, targets: [\u0026#34;MyLibrary\u0026#34;]) //Here is where you can define products. They can be libraries or executables ], dependencies: [ .package(name: “Utility”, url: \u0026#34;https://github.com/user/repo.git\u0026#34;, from: \u0026#34;1.0.0\u0026#34;) //Import the latest version \u0026gt;1.0.0. Alternatively, you can use .exact(“1.0.0”) to get an exact version. There are also ranges and such. If there are multiple packages, SPM will try to get the most up to date combination where all dependencies work with eachother. ], targets: [ .target(name: \u0026#34;MyLibrary\u0026#34;, dependencies: [\u0026#34;Utility\u0026#34;]), //Targets, basically what you would run. .testTarget(name: \u0026#34;MyLibraryTests\u0026#34;, dependencies: [\u0026#34;MyLibrary\u0026#34;]) ] ) //There are way more features you can take advantage of. Originally published 04/23/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-04-23T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-21/","title":"Day #21"},{"content":"Ok, I’ve mentioned SwiftPM or SPM multiple times now - but what is it?\nSwiftPM is a built-in dependency manager for Swift code. SwiftPM allows users to create, distribute, download, and link modules. Modules can either be libraries, or executables.\nHere is the basic file structure of a module:\n1 2 3 4 5 6 ModuleName ├── Sources │ └── ModuleName │ ├── File1.swift │ ├── File2.swift └── Package.swift The Package.swift file is the most important part, as it organizes the module.\nOriginally published 04/22/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-04-22T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-20/","title":"Day #20"},{"content":"Swift has a style guide! It is especially useful if you are an experienced programmer picking up the language, because Swift has certain features that you will likely not know how to style.\nOriginally published 04/21/2021 https://pittcsc.org/, republished 09/09/2022.\n","date":"2021-04-21T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-19/","title":"Day #19"},{"content":"Swift was originally codenamed “Shiny,” a reference to a catchphrase used in the TV show Firefly.\nAbout 3 months before the language launched, it was named Swift.\nOriginally published 04/20/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-20T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-18/","title":"Day #18"},{"content":"Structs, as long as they are comprised of less than or equal to 3 words, who’s words are primitive or first-class, are generally performant, as long as they do not implement a protocol. This is because they reside in the stack instead of the heap, have no references (although a struct requires reference counting if its properties require it), and are statically managed. To make data fields first class, you can abstract them with other types, such as an enum which implements String, or Hashable. Swift arrays can also store structs directly, instead of using references - which can be EXTREMELY useful (consider an array of type “points” comprising a mesh/graph).\nClasses are generally performant too, as long as you keep the references down, and try to make them statically called by declaring them “final”. Marking data fields as “final” is also very performant, as it eliminates compiler-side getter setter override checks. Marking functions as private can have the same effect. Giving the compiler more information, such as the module hierarchy (Enable “Whole Module Optimization”), will lead to automatic optimization, because it will check classes for sub-classes and such. This is one of the reasons that Swift is faster than obj-c.\nOriginally published 04/19/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-19T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-17/","title":"Day #17"},{"content":"Classes Swift classes are reference types. This means if you assign a class to a field, you are passing a reference around. In order to copy a class, you will have to make a shallow or deep copy.\nStructs Swift structs are value types. This means if you are passing a copy around. Every time you move a struct, you create a new copy of the struct.\nWhy? First thing to note is that Structs are not unique to Swift. They are present in many languages, such as C, C#, C++, golang. Some languages implement structs as derivatives of other data structures, and some langagues do not have them at all (java, python). Structs are generally more performant if used right - which is a distinct advantage. However, the biggest advantage is probably just the differences in copying versus referencing. Structs help you move your code towards a more data-oriented approach.\nOriginally published 04/18/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-18T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-16/","title":"Day #16"},{"content":"Computed properties are variables that compute when they are called\n1 2 3 //Example var tempFahrenheit: Int = 90 let tempCelsius: Int { return (32 * tempFahrenheit − 32) × 5/9 } They are useful for disposable resources.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //Here is an example that i’ve seen in the wild. It just converts ints into other types. extension Int { public var g: CGFloat { return CGFloat(self) } public var d: Double { return Double(self) } public var f: Float { return Float(self) } public var b: Int8 { return Int8(self) } public var ub: UInt8 { return UInt8(self) } public var s: Int16 { return Int16(self) } public var us: UInt16 { return UInt16(self) } public var i: Int32 { return Int32(self) } public var ui: UInt32 { return UInt32(self) } public var ul: UInt { return UInt(self) } public var ll: Int64 { return Int64(self) } public var ull: UInt64 { return UInt64(self) } } Computed properties do not have to be used for code organization. They are also great for dealing with values that are constantly changing.\nOriginally published 04/17/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-17T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-15/","title":"Day #15"},{"content":"Swift has variadic parameters. This allows you to put multiple things into a function without having to use an array. It is notated with the range syntax “…”\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 //EXAMPLE FROM https://www.swiftbysundell.com/tips/the-power-of-variadic-parameters/ // When using a variadic parameter, any number of arguments can // be passed, and the compiler will automatically organize them // into an array. func send(_ message: Message, attaching attachments: Attachment...) { ... } // Passing no variadic arguments: send(message) // Passing either a single, or multiple variadic arguments: send(message, attaching: image) send(message, attaching: image, document) You always have the option of using an array if you want, like:\n1 send(message, attaching: […]) Originally published 04/16/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-16T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-14/","title":"Day #14"},{"content":"A guard statement is basically a reverse if statement\n1 2 3 4 guard textField.text! != “” else { exit(1) } //If the condition is true, the program will continue. Kind of like a safe “assert()” //Guard statements can also be used to unwrap optionals guard let entry = someEntryField.entry else { presentWarning(“You have not entered anything”); return } Why do these even exist? First of all, they make your code prettier. They can flatten some code structures like pyramids of validation. It takes less effort to read “guard” and know what it means instead of “if !() {}”. Secondly, it introduces a method of unwrapping an optional and placing it in the active scope, instead of inside a body like an “if let” statement.\nOriginally published 04/15/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-15T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-13/","title":"Day #13"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 for i in 1…3 { } //range for i in collection { } //over a collection for i in stride(…) { } //striding while () { } //while repeat { } while () //Same thing, but condition is after body. //Higher order solutions .forEach {} .map {} Originally published 04/14/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-14T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-12/","title":"Day #12"},{"content":"Type aliasing is a way of giving a type a different name. It is useful for type-safe code organization, and cosmetics.\n1 2 3 4 5 typealias Credit = Int struct Course { let credits: Credit } Originally published 04/13/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-13T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-11/","title":"Day #11"},{"content":"Swift extensions are probably one of the most powerful features of the language.\nYou can place extra code in extensions and it will be as if the code was in the entity itself.\nIn short: “Extension methods are a special kind of static method, but they are called as if they were instance methods on the extended type.”\n1 2 3 4 5 6 7 8 9 10 11 12 class Army { func giveCommand(command: String) -\u0026gt; CommandID {} } extension Army { func rescindCommand(id: CommandID) -\u0026gt; Bool {} //This code is as if it is in class Army } //All arrays with type Army will now have a “deploy” functionality. This feature can be used in real scenarios like sorting ect… extension Array where Element: Army { func deployAll() {} } Originally published 04/12/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-12T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-10/","title":"Day #10"},{"content":" 1 2 3 4 5 6 open class Book { //An “open” class allows subclassing within a context outside of the defining module private var name: String //Restricts access to enclosing declaration. Extensions in same class file will be able to access. public var isbn: UUID //Does not restrict access. fileprivate var genre: String //Restricts access outside of the defining *file*. Classes within the same file will be able to access. internal var length: Int //Restrict access outside of the defining *module*. } Protected does not exist because:\nIt is ambiguous as to whether an extension should be able to access it Subclass methods could expose it anyway All vars/classes/types/entities have a access level of internal by default.\nModifiers:\nIf you give something the @testable attribute, it will be accessible by the testing classes, but maintain status as internal/private otherwise. You can define access control to an entire class/struct. This will also carry through for all it’s members (properties, methods, initializers, and subscripts) If you create a tuple out of two differently access controlled types, it will assume the most restrictive one. A function will be as restrictive as it’s parameters or return types are, unless you specify. Enum cases cannot have different levels of access, as well as their raw and associated values Type aliases can only have the same access level, or a more restrictive one.* this is an oversimplification Originally published 04/11/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-11T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-9/","title":"Day #9"},{"content":"Associated values: You can store custom values in an enum.\n1 2 3 4 5 6 7 8 9 enum Genre { case fiction case scifi case nonFiction case history case science case medical case other(name: String) //\u0026lt;——— } Raw values: You can store raw values in an enum. This can be used to wrap a reference type like a String (see below) in a value type (enum).\n1 2 3 4 5 6 7 enum Routes: String { case home = “/home” case about = “/about” case library = “/library” case contact = “/contact” } let homePath: URL = URL(“www.you.com” + Routes.home.rawValue) There is so much more (recursive enums, putting methods inside enums, unwrapping enums, ..)! Enums can be used for so much more than just “options”. One cool thing I’ve seen enums used for before is controlling a C state machine.\nOriginally published 04/10/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-10T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-8/","title":"Day #8"},{"content":"With a little (lot) of finagling, you can run C libraries from Swift, which opens the doors to higher performance and graphical/musical/computational applications.\nThe basic structure for importing a C library in Swift might look like this:\nCompiled C library on system in users/lib or wherever it is default -\u0026gt; Make a module -\u0026gt; Import as system library with SwiftPM (SwiftPackageManager) into that module -\u0026gt; Make sure linker is working correctly -\u0026gt; Create modulemap file and Bridging header file (also sometimes called a shim) -\u0026gt; Configure these files -\u0026gt; Import this module into your project using SwiftPM.\nIt is very difficult since SwiftPM does not tell you what you are doing wrong, and there is not a lot of good help online.\nOriginally published 04/09/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-09T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-7/","title":"Day #7"},{"content":"@IBAction \u0026amp; @IBOutlet: These are remnants of Obj-c, and pre-macOS10.3. Before Xcode existed, there was something called Project Builder. To create views for Project Builder, you had to use a separate application called Interface Builder, which made .nib files \u0026amp; the object graph. @IBOutlet and @IBAction were used as keywords to expose Project Builder code to Interface builder. Note that the “IB” in these keywords stands for Interface Builder.\nThese keywords do not actually have any meaning in a modern context, especially @IBAction, since any object from the Interface Builder (now included in Xcode) can be attached to any function matching this pattern: name(_ sender: ) -\u0026gt; Void.\n@IBOutlet keyword however is still needed to link properties in the IB and code.\nProperty wrappers: Putting @propertywrapper before a class lets you create a type that has some functionality ever time it is changed. For example, you could make “@propertywrapper class Flipped{}”, and every data field with “@Flipped” before it would have it’s value flipped upon assignment. @Flipped var name: String name = “Nathan” print(name) //prints “nahtaN” Just like everything else in Swift, these can get insanely powerful.\nObjc: Adding @objc will expose your Swift code to the Objective-C runtime. This is needed for some functionalities like UIGestureRecognizer, and other things still rooted in Obj-c.\nAttributes: There is a whole class of Swift functionality based off of something called attributes. @objc is one of these attributes, as well as property wrappers. There are tons of these that perform all kinds of black magic, so I will just leave you with articles at the end of this post.\nOriginally published 04/08/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-08T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-6/","title":"Day #6"},{"content":"The Protocol-delegate pattern is a method of subscribing methods to an event.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 protocol ButtonPressedDelegate: AnyObject { func methodToBeImplemented() } class ReceivingClass: UIViewController, ButtonPressedDelegate { func methodToBeImplemented() { //Conform to protocol print(“Button pressed”) } } class SendingClass: UIViewController { weak var delegate: ButtonPressedDelegate? //Create field for reference. Use “weak var” to avoid retain cycle. @IBAction func send(_ sender: Any) { delegate.methodToBeImplemented() //Call method } } let receivingC = ReceivingClass() let sendingC = SendingClass() sendingC.delegate = receivingC.self //Pass the reference. Normally you would not do it like this, but this is the concept. //Better places to assign a reference: //-From inside cellForRowAt() //-In a segue //-As you instantiate sending class from receiving class //Common errors: //-Protocols are one-to-one. If you are trying to subscribe multiple receivers, you will need to implement a multicast delegate. Dm for code snippet. //-Forgetting to assign self to delegate field in sending class. //-Issues with “weak self”, make sure to conform the protocol to AnyObject //For more code ideas, and a explanation an why we use “weak var”: https://medium.com/macoclock/delegate-retain-cycle-in-swift-4d9c813d0544 Originally published 04/07/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-07T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-5/","title":"Day #5"},{"content":"Optionals are notated by a “?” postfix. Some types are optional by default. If a type is optional, it either has a value, or is nil. There are a lot of things that are optionals, such as images and text fields. Optionals allow for more logical API’s\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 var age: Int? //Custom optional. Since it is optional, it does not need to be instantiated inside a class. It can be assigned to later. let image: UIImage = UIImage(named: “profilePic”) //Type will be optional by default let textField: UITextField = UITextField() //Type will be optional by default //Optional values have to be “un-wrapped” to be used, because something can’t both have a value and be nil. //There are multiple ways to un-wrap an optional ////SAFE METHODS: if let text = textField.text { //“text” will be accessible inside here if it exists } guard let text = textField.text else { return } //text will be available following declaration let text = textField.text ?? “” //If textField is nil, “” will be given as a default value ////UNSAFE METHODS: let text = textField.text! //This will crash if the optional is nil. You should only use this if you know the value will never be nil Originally published 04/06/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-06T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-4/","title":"Day #4"},{"content":"Swift is a great choice for web development due to the following features:\nSpeed. Swift’s loops are lightning fast. Loops are very important for web-backends Shared models. You can share a single data model file between your web app and mobile app (EX: DefaultUser.swift). This can cut down on development costs and time MASSIVELY. It’s also super clean and… Expressive. Swift is super expressive. This is always an advantage. Swift also has some disadvantages when it comes to web development:\nLack of unified async functionality. Swift does not have default async functionality yet, although it is in the making. Currently, there are 3rd party solutions for promises and await. The “default” way of doing async in Swift is using closures as completion handlers. Swift’s async features when they arrive will be similar to GOlang’s. Lack of information and adoption Frameworks:\nVapor: The most adopted Swift web framework. It is very fast and focuses on modular design. It is capable of making very complex apps. It is slightly bulky compared to other options. There is a good amount of information on it. I recommend https://theswiftdev.com/practical-server-side-swift-using-vapor-4-book/ by Tibor Bödecs. Perfect: This is the fastest web framework in the world*. It is very lightweight and does not have a lot of information on how to use. However, it should be pretty intuitive to use for people who are experienced. It is a refined framework, however I do not know if it will continue to be maintained. Kitura: Mostly discontinued. It was supported by Microsoft for awhile, but lost the battle against Vapor. Kitura is still usable. It has a low memory footprint, good documentation, and still fulfills it’s purpose of working well on the cloud. *tied with pretty much every other advanced web framework. It’s all really subjective.\nOriginally published 04/05/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-05T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-3/","title":"Day #3"},{"content":" You will need a developer account: To get an individual’s developer account you will need basic information like your name and address. If you are trying to get a business account, you will need a website, ADUNS number, and an individual with binding authority (probably you) to administer the account. An ADUNS number can be obtained by filling out a form on Apple’s website. Although, when I did it the form was broken. ADUNS is a subset of a DUNS number which is basically a certification given by a company called d\u0026amp;b that certifies the company as legitimate. This number will actually allow you to take federal funds if you ever win a contract, which is kind of cool. You will need to manage signing certificates. These are basically permissions and security certificates. This step can be pretty hard. Preparing submission to the store. This process is very tedious, as you have to check a whole lot of boxes, write descriptions, keywords, create art and app icons. Signing legal agreements. Basically you just have to accept the banking contracts so Apple knows where to send your revenues. There are also developer programs you may be interested in enrolling in, such as reduced fees for developers making \u0026lt;1m (thanks Fortnite). If your app uses encryption or HTTPS requests or other stuff you may be required to sign more agreements. Submit to store. You will have to build your code, and upload it. Then, you can send it off for review. In the past code review has taken 1-2 weeks, but lately I have gotten my code reviewed in less than an hour (shoutout to the guy who reviewed my code \u0026lt;1h before his Christmas break). Originally published 04/04/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-04T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-2/","title":"Day #2"},{"content":"The Foundation framework is an Obj-C framework part of Swift’s core libraries. It is the root of all NSObject types. Foundation is closed source.\nThe Core Foundation (CF) framework is a lower level C implemented library part of Swift’s core libraries. It is the root of all CF types. CF objects must have their memory managed manually. CF does not need a Obj-C runtime. CF is open source.\nThe difference between these two frameworks is mostly that CF has a very limited Object model (it is C based after all). On the backend, foundation and CF can convert between each other toll-free.\nDarwin is a bridge to commonly used C functions. It is a superset of CoreFoundation \u0026amp; Foundation. Here is an example of how it might be used with compiler directives for system specific code:\n1 2 3 4 5 #if os(macOS) || os(iOS) import Darwin #elseif os(Linux) import Glibc #endif There is also Swift standard library, which provides basic types like Strings.\nOriginally published 04/03/2021 https://pittcsc.org/, republished 09/08/2022.\n","date":"2021-04-03T00:00:00Z","permalink":"https://nathanbarta.com/p/swift-daily-1/","title":"Day #1"}]